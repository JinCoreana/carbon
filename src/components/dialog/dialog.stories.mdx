import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs";
import LinkTo from "@storybook/addon-links/react";
import TranslationKeysTable from "../../../.storybook/utils/translation-keys-table";

import Dialog from ".";
import * as stories from "./dialog.stories.tsx";

<Meta
  title="Dialog"
  component={Dialog}
  parameters={{
    info: { disable: true },
    themeProvider: { chromatic: { theme: "sage" } },
    controls: { disable: true },
  }}
/>

# Dialog

A dialog box overlaid on top of any page.

## Contents

- [Quick Start](#quick-start)
- [Designer Notes](#designer-notes)
- [Related Components](#related-components)
- [Examples](#examples)
- [Props](#props)

## Quick Start

```javascript
import Dialog from "carbon-react/lib/components/dialog";
```

## Designer Notes

Useful to perform an action in context without navigating the user to a separate page.

Several pre-set widths are available - the height of the dialog will flex to fit the content. It’s best to avoid dialogs that are taller than the user’s viewport height. Typical user viewport heights can be as little as 650 pixels.

Choose whether a dark tint is applied behind the dialog which helps to focus the user on the dialog.

A configuration shows a close icon at the top right of the Dialog. Sometimes users are more likely to click this than a traditional ‘Cancel’ button.

## Related Components

- Complex task that needs more space? [Try Dialog Full Screen](/?path=/docs/dialog-full-screen--default-story "Dialog Full Screen").
- Need to refer back to the underlying page? [Try Sidebar](/?path=/docs/sidebar--default-story "Sidebar").

## Examples

### Default

<Canvas>
  <Story name="default" story={stories.DefaultStory} />
</Canvas>

### Editable

When mixing editable and non-editable content, you can use the <LinkTo kind="Box" story="page">Box</LinkTo> component to highlight the fields that can be changed.

<Canvas>
  <Story name="editable" story={stories.Editable} />
</Canvas>

### With help

<Canvas>
  <Story name="with help" story={stories.WithHelp} />
</Canvas>

### With dynamic content

<Canvas>
  <Story name="dynamic content" story={stories.DynamicContent} />
</Canvas>

### Overriding the first focused element

By default, when a dialog is opened it will automatically focus the first element within its children that can be focussed.
However, there are a couple of ways of overriding this default behaviour. The `focusFirstElement` prop accepts a reference
to the element you wish to focus on open (an example of this can be seen by clicking the first button below). If the element
you want to focus supports `autoFocus` then the you can override the default behaviour by using the `disableAutoFocus` prop
and setting the `autoFocus` on the element you wish to be focused instead (click the second button to see an example).

<Canvas>
  <Story
    name="focusing a different first element"
    story={stories.FocusingADifferentFirstElement}
  />
</Canvas>

### Overriding the content padding

Using the `contentPadding` prop will enable the padding of the `Dialog` content to be overriden, the example below has
set the padding to 0. Please see the [table below](#props) for more iformation about the values accepted by this prop.

<Canvas>
  <Story
    name="overriding content padding"
    story={stories.OverridingContentPadding}
  />
</Canvas>

### Allowing other elements to be focused

Using the `focusableContainers` prop allows elements that are not DOM children of the Dialog to be reachable with the keyboard while the Dialog is open.
This may occasionally be useful with things like Toasts where they persist on the page until dismissed by clicking a close icon.

<Canvas>
  <Story
    name="other focusable containers"
    story={stories.OtherFocusableContainers}
  />
</Canvas>

### Responsive Example

<Canvas>
  <Story name="responsive" story={stories.Responsive} />
</Canvas>

## Props

### Dialog

<ArgsTable of={Dialog} />

## Translation keys

The following keys are available to override the translations for this component by passing in a custom locale object to the
[i18nProvider](https://carbon.sage.com/?path=/story/documentation-i18n--page).

<TranslationKeysTable
  translationData={[
    {
      name: "dialog.ariaLabels.close",
      description: "The text for close button aria-label attribute",
      type: "func",
      returnType: "string",
    },
  ]}
/>
