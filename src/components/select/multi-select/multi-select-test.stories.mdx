import { Meta, Canvas, Story } from "@storybook/addon-docs";
import { useState } from "react";
import { MultiSelect, Option } from "../";

<Meta title="Select/MultiSelect/Test" parameters={{ info: { disable: true } }} />

# MultiSelect

## Controlled with custom onChange

This is in the Test stories file to allow us to test that MultiSelect works as a controlled component, even in unusual cases.

This is not in the "main" stories so we do not document a bad pattern.

This story will need to be converted to a test case (and removed) when we convert the Cypress tests to cypress-react.

<Canvas>
  <Story name="controlled with custom onchange">
    {() => {
      const MAX_SELECTIONS_ALLOWED = 2;
      const [selectedPills, setSelectedPills] = useState([]);
      const handleActivityChange = (event) => {
        if (event.target.value.length <= MAX_SELECTIONS_ALLOWED) {
          setSelectedPills(event.target.value);
        }
      };
      return (
        <MultiSelect
          name="testing"
          value={selectedPills}
          onChange={handleActivityChange}
          disablePortal
          openOnFocus
          label="Test"
          placeholder=" "
        >
          <Option value="1" text="One" />
          <Option value="2" text="Two" />
          <Option value="3" text="Three" />
          <Option value="4" text="Four" />
          <Option value="5" text="Five" />
          <Option value="6" text="Six" />
          <Option value="7" text="Seven" />
          <Option value="8" text="Eight" />
          <Option value="9" text="Nine" />
          <Option value="10" text="Ten" />
        </MultiSelect>
      );
    }}
  </Story>
</Canvas>
